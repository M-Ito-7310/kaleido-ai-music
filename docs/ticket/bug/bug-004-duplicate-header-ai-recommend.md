# Bug #004: AIおすすめページでヘッダーが2重表示される

**ステータス**: 🟢 完了
**優先度**: Medium
**担当**: AIエージェント
**作成日**: 2025-10-26
**開始日時**: 2025-10-26 16:00
**完了日時**: 2025-10-26 16:40
**実績時間**: 40分

## 🐛 バグ概要

AIおすすめページにおいて、ヘッダーが2つ表示されている。ページ側のソースにもヘッダーがコーディングされている可能性があり、レイアウトコンポーネントのヘッダーと重複している。

## 📍 発生環境

- ブラウザ: 未確認
- OS: 未確認
- URL: /ai-recommend (AIおすすめページ)
- バージョン: -

## 🔄 再現手順

1. AIおすすめページ(/ai-recommend)にアクセス
2. ページ上部を確認
3. ヘッダーが2つ表示されていることを確認

## ❌ 期待される動作

ヘッダーは1つのみ表示されるべき。レイアウトコンポーネントで提供されるヘッダーのみが表示される。

## 🚨 実際の動作

ヘッダーが2つ表示されている。おそらくページコンポーネント内に独自のヘッダーが実装されており、レイアウトのヘッダーと重複している。

## 📸 スクリーンショット/ログ

未添付

## 🔍 原因分析

### 問題箇所
- **ファイル**: app/recommendations/page.tsx:4, 41, 53
- **ファイル**: app/layout.tsx:114

### 原因
AIおすすめページ（recommendations）では、以下の2つの問題がありました：

1. **ルートレイアウトで既にHeaderを表示しているのに、ページ内でも独自にHeaderを表示していた**
   - `layout.tsx` (114行目)でHeaderコンポーネントを表示
   - `recommendations/page.tsx` (41行目、53行目)でもHeaderコンポーネントを表示
   - これにより、ヘッダーが2重に表示される

2. **他のページとの整合性の欠如**
   - 他のページはレイアウトのHeaderのみを使用
   - recommendationsページだけが独自にHeaderを追加していた

## ✅ 修正内容

- [x] 修正コミット: 後で記録
- [x] 影響範囲: app/recommendations/page.tsx のみ
- [x] テスト実施: ローカル環境で視覚的確認、TypeScriptコンパイルチェック完了

### 修正詳細
**ファイル**: app/recommendations/page.tsx

**変更内容**:
1. Line 4: `import { Header } from '@/components/layout/Header';` を削除
2. Loading state内の独自Headerとmin-h-screenラッパーを削除（Line 38-47）
3. Main content内の独自Headerとmin-h-screenラッパーを削除（Line 47-62）
4. ページコンポーネントはcontainerのみを返すように簡素化

**理由**:
- ルートレイアウト（layout.tsx）で既にHeaderが提供されているため、ページ側で独自にHeaderを表示する必要がない
- 他のページとの一貫性を保つため
- 重複表示を解消するため

## 🧪 テスト確認項目

- [x] AIおすすめページでヘッダーが1つのみ表示されることを確認
- [x] 他のページのヘッダー表示に影響がないことを確認
- [x] ヘッダーのナビゲーション機能が正常に動作することを確認
- [x] AIラジオセクションが正しく表示されることを確認
- [x] おすすめ音楽グリッドが正しく表示されることを確認
- [x] コンソールエラーがないことを確認
- [x] TypeScriptコンパイルエラーがないことを確認

## 📝 メモ

チケット作成日: 2025-10-26
修正実施日: 2025-10-26 16:00
修正者: AIエージェント

### 修正時の気付き
- recommendationsページは他のページと異なり、独自のHeaderをimportして表示していた
- Next.js App Routerの構造では、ルートレイアウトでHeaderを提供しているため、各ページでHeaderを表示する必要はない
- この修正により、他のページ（library, upload, favorites等）と一貫したレイアウト構造になった
- min-h-screenクラスもレイアウト側で管理されているため、ページ側では不要

### 完了記録
完了日時: 2025-10-26 16:40
実績時間: 40分
Git commit: 後で記録

#### 最終確認
- [x] バグが完全に修正されている
- [x] 関連機能に影響がない
- [x] テストがすべてパス
- [x] TypeScriptエラーなし

## 🔗 関連

- 関連Issue: -
- 関連PR: -
- 参考資料: -
