# Feature #007: ホームページに再生数上位3曲のカードを表示

**ステータス**: 🟡 進行中
**優先度**: Medium
**担当**: AIエージェント
**作成日**: 2025-10-28
**開始日時**: 2025-10-28
**完了日**: -

## ✨ 機能概要

ホームページの「人気の音楽」セクションに、再生数上位3曲のカードを表示する機能を追加します。

## 🎯 目的・背景

ユーザーがホームページで人気の音楽を一目で確認できるようにし、サイトのエンゲージメントを向上させます。再生数の多い楽曲を視覚的に強調することで、新規ユーザーの興味を引き、既存ユーザーにも人気トレンドを提示します。

## 📋 主要機能

1. 再生数上位3曲を自動的に取得して表示
2. カード形式で音楽情報を見やすく表示（サムネイル、タイトル、再生数など）
3. カードクリックで音楽詳細ページへ遷移可能

## 🔧 技術仕様

### データ構造
- 新しいテーブル/モデル: なし（既存のMusicテーブルを使用）
- 既存データの変更: なし

### API設計
- エンドポイント: `GET /api/music/popular?limit=3`
- リクエスト: クエリパラメータで取得件数を指定
- レスポンス: 再生数順にソートされた音楽データの配列

### UI/UXデザイン
- 新しいページ: なし
- 新しいコンポーネント: `PopularMusicCard`（音楽カードコンポーネント）
- ユーザーフロー: ホームページ表示 → 人気の音楽セクション確認 → カードクリック → 詳細ページへ遷移

### 依存関係
- 新しいパッケージ: なし
- 既存機能への影響: 既存の音楽カードコンポーネントを参考にできる可能性あり

## ✅ 実装タスク

### バックエンド
- [ ] 再生数上位取得API実装（`/api/music/popular`）
- [ ] 再生数によるソート処理
- [ ] レスポンスデータの最適化
- [ ] エラーハンドリング

### フロントエンド
- [ ] ホームページに「人気の音楽」セクション追加
- [ ] PopularMusicCardコンポーネント実装
- [ ] API連携（再生数上位3曲取得）
- [ ] レスポンシブデザイン対応
- [ ] ローディング状態の表示
- [ ] カードクリック時の詳細ページ遷移

### テスト
- [ ] API単体テスト
- [ ] コンポーネント単体テスト
- [ ] 統合テスト
- [ ] ブラウザテスト

## 📦 成果物

- [ ] `/api/music/popular` - 再生数上位取得API
- [ ] `PopularMusicCard.tsx` - 音楽カードコンポーネント
- [ ] ホームページへの「人気の音楽」セクション追加

## 🎯 完了条件

- [ ] 再生数上位3曲が正しく取得・表示される
- [ ] カードのデザインが他のUIと統一されている
- [ ] カードクリックで詳細ページに遷移できる
- [ ] レスポンシブデザインが適切に動作
- [ ] テストが全てパス
- [ ] コードレビュー完了

## 🧪 テスト計画

### 単体テスト
- [ ] 再生数上位取得APIが正しくソートされたデータを返す
- [ ] 上位3曲のみが取得される
- [ ] PopularMusicCardコンポーネントが正しくレンダリングされる

### 統合テスト
- [ ] ホームページで人気の音楽セクションが表示される
- [ ] APIとフロントエンドの連携が正しく動作する

### E2Eテスト
- [ ] ホームページアクセス時に再生数上位3曲が表示される
- [ ] カードクリックで詳細ページに遷移する
- [ ] データがない場合の表示（フォールバック）

### ブラウザテスト
- [ ] Chrome
- [ ] Firefox
- [ ] Safari
- [ ] Mobile Safari (iOS)
- [ ] Chrome Mobile (Android)

## 📝 メモ

チケット作成日: 2025-10-28

実装時の検討事項:
- 既存の音楽カードコンポーネントを再利用できるか確認
- 再生数が同じ場合のソート順（作成日時など）を決定
- キャッシュ戦略（頻繁に更新する必要があるか）

## 🔗 関連

- 関連Issue: -
- 関連PR: -
- 参考資料: -
- デザインモックアップ: -
