# Enhancement #006: 音楽アップロード機能へのWAVファイル対応追加

**ステータス**: 🔴 未着手
**カテゴリ**: UX
**優先度**: Medium
**担当**: 未割当
**作成日**: 2025-10-27
**完了日**: -

## 🔧 改善概要

音楽アップロード機能で現在MP3ファイルのみ対応しているところを、WAVファイルもアップロードできるように拡張する。

## 🎯 目的・背景

Suno AIのProプランではWAVファイル形式でもダウンロードできるため、より高品質な音源をアップロードできるようにする必要がある。現在はMP3のみの対応となっており、WAVファイルをアップロードしようとするとエラーになる。

## 📊 現状の問題点

- 音楽アップロード機能がMP3ファイルのみ対応
- Suno AI ProプランユーザーがWAVファイルをダウンロードしても、アップロードできない
- 高品質な音源を提供できない

## 💡 改善後の期待値

- MP3とWAVの両形式に対応
- Suno AI Proプランの高品質音源を活用可能
- ユーザーの選択肢が広がる

## 🔧 改善方法

### アプローチ
ファイルアップロード時のバリデーションおよびacceptプロパティにWAV形式（audio/wav, .wav）を追加する。

### 技術的な詳細
1. フロントエンド: input[type="file"]のaccept属性にWAV形式を追加
2. バリデーション: ファイル形式チェックにWAVを追加
3. バックエンド: WAVファイルの処理・保存に対応

## ✅ 実装タスク

- [ ] フロントエンドのファイル入力フィールドにWAV形式を追加
- [ ] クライアント側バリデーションにWAVを追加
- [ ] サーバー側バリデーションにWAVを追加
- [ ] WAVファイルの保存・取得処理を確認
- [ ] 動作テスト（MP3とWAV両方）

## 📦 変更対象ファイル

- [ ] 音楽アップロードフォームコンポーネント - accept属性の更新
- [ ] バリデーションロジック - MIME typeチェックの更新
- [ ] APIルート（該当する場合） - WAVファイル処理の対応確認

## 🧪 ビフォー・アフター比較

| 指標 | Before | After | 改善率 |
|------|--------|-------|--------|
| 対応フォーマット数 | 1 (MP3のみ) | 2 (MP3, WAV) | +100% |
| 高品質音源対応 | 不可 | 可能 | - |

## 🎯 完了条件

- [ ] すべての実装タスクが完了
- [ ] MP3ファイルのアップロードが正常に動作
- [ ] WAVファイルのアップロードが正常に動作
- [ ] 既存機能に影響がないことを確認
- [ ] テストが全てパス

## 🧪 テスト項目

- [ ] MP3ファイルがアップロードできることを確認（回帰テスト）
- [ ] WAVファイルがアップロードできることを確認
- [ ] 対応外のファイル形式が適切にエラーになることを確認
- [ ] アップロード後の音楽再生が正常に動作することを確認
- [ ] ブラウザ互換性テスト

## 📝 メモ

作成日: 2025-10-27
Suno AI Proプランとの連携を考慮した改善。

## 🔗 関連

- 関連Issue: -
- 関連PR: -
- 参考資料: Suno AI Pro機能
